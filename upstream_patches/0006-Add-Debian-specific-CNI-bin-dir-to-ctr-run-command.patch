From: Shengjing Zhu <zhsj@debian.org>
Date: Tue, 1 Mar 2022 21:38:59 +0800
Subject: Add Debian specific CNI bin dir to ctr run command

Forwarded: not-needed
diff --git a/cmd/ctr/commands/run/run.go b/cmd/ctr/commands/run/run.go
index 799e37305..5b56f5f2e 100644
--- a/cmd/ctr/commands/run/run.go
+++ b/cmd/ctr/commands/run/run.go
@@ -191,7 +191,7 @@ var Command = &cli.Command{
 		}
 		var network gocni.CNI
 		if enableCNI {
-			if network, err = gocni.New(gocni.WithDefaultConf); err != nil {
+			if network, err = gocni.New(gocni.WithPluginDir([]string{gocni.DefaultCNIDir, "/usr/lib/cni"}), gocni.WithDefaultConf); err != nil {
 				return err
 			}
 		}
diff --git a/internal/cri/config/config_unix.go b/internal/cri/config/config_unix.go
index 7322700b4..fbd569c5d 100644
--- a/internal/cri/config/config_unix.go
+++ b/internal/cri/config/config_unix.go
@@ -72,7 +72,7 @@ func DefaultRuntimeConfig() RuntimeConfig {
 
 	return RuntimeConfig{
 		CniConfig: CniConfig{
-			NetworkPluginBinDir:        "/opt/cni/bin",
+			NetworkPluginBinDir:        "/usr/lib/cni",
 			NetworkPluginConfDir:       "/etc/cni/net.d",
 			NetworkPluginMaxConfNum:    1, // only one CNI plugin config file will be loaded
 			NetworkPluginSetupSerially: false,
